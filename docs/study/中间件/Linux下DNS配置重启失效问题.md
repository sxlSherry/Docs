# Linux下DNS配置重启失效问题 

​		大湾区的POC环境上网需要配置DNS，不知道为啥就莫名遭遇了几次服务器重启问题，于是就记录下如何这个DNS配置重启失效的问题。

##  Linux下DNS配置

​		配置文件 /etc/resolv.conf ，在这个文件中写入DNS即可。

​		打开这个配置文件，发现有注释提示：

> Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)# DO NOT EDIT THIS FILE BY HAND — YOUR CHANGES WILL BE OVERWRITTEN

​		原来系统已经提示我们不要手动改此文件，因为这里每次重启会被覆盖。



## 解决DNS配置失效的配置方法

### 方法1 

编辑/etc/network/interfaces文件，执行```vim /etc/network/interfaces``` 添加一行DNS配置，比如```dns-nameservers 8.8.8.8```。

### 方法2 

编辑/etc/resolvconf/resolv.conf.d/base文件，执行```vim /etc/resolvconf/resolv.conf.d/base``` 添加DNS配置，比如```nameserver 8.8.8.8```，如果有多个DNS就添加多行，一行一个。

以上两个方法保存后执行```resolvconf -u```此时，再打开/etc/resolv.conf会发现刚才添加的DNS配置了。 以后在重启就没问题了~~~

### 方法3

编辑/etc/sysconfig/network-scripts/ifcfg-eth0文件，执行```vim /etc/sysconfig/network-scripts/ifcfg-eth0```文件中加入DNS配置，例如```DNS1=8.8.8.8```，再执行```service network restart```。

保存后执行```systemctl network restart``` 重启后再来看看resolv.conf会发现刚才添加的DNS配置了。 以后在重启就没问题了~~~
