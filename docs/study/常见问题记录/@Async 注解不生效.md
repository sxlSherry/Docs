# @Async 注解不生效

​	在写多线程方法的时候，遇到Async注解不生效（其实遇到的是部分生效，部分不生效）。查了一下框架，没有少写任何配置。

### 原因

​	异步的方法的方法和调用写在了同一个类中，导致了该现象的发生。

​	spring 在扫描bean的时候会扫描方法上是否包含@Async注解，如果包含，spring会为这个bean动态地生成一个子类（即代理类，proxy），代理类是继承原来那个bean的。此时，当这个有注解的方法被调用的时候，实际上是由代理类来调用的，代理类在调用时增加异步作用。然而，如果这个有注解的方法是被同一个类中的其他方法调用的，那么该方法的调用并没有通过代理类，而是直接通过原来的那个bean（用this调用），所以就没有增加异步作用，所以@Async注解无效。

### 解决

1. 当然是不要把异步方法和调用该方法的方法写在一个类里面，单独把异步方法写到特定的类中；
2. 一定要在一个类中的话，可以在调用的地方建一个该类的代理类再进行调用；

